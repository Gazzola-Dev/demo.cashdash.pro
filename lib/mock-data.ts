import {
  ContractWithMembers,
  MilestoneWithTasks,
  Profile,
  Project,
  ProjectInvitationWithDetails,
  ProjectInvitationWithProfile,
  ProjectMemberWithProfile,
  ProjectSubscription,
  ProjectWithDetails,
  TaskWithAssignee,
} from "@/types/app.types";
import { Tables } from "@/types/database.types";
import { User } from "@supabase/supabase-js";

// Milestone Contracts - Update to include milestone-specific contract data
const milestoneContracts = {
  // Project 1 Milestone Contracts
  "milestone-1-1": {
    id: "contract-m1-1",
    project_id: "project-1",
    title: "Authentication & Login Contract",
    description: "Contract for mobile app authentication and login features",
    status: "active",
    start_date: "2025-08-15T00:00:00Z",
    end_date: "2025-09-15T00:00:00Z",
    created_at: "2025-08-14T15:00:00Z",
    updated_at: "2025-08-14T15:00:00Z",
    client_name: "MobileApp Inc",
    client_company: "Mobile Solutions LLC",
    currency: "USD",
    total_amount_cents: 22000,
    upwork_contract_id: "upwork-123456-m1",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-2",
        display_name: "Bob Johnson",
        email: "bob@example.com",
        avatar_url: "/avatars/bob.jpg",
        role: "developer",
        hasApproved: true,
      },
    ],
    payments: [
      {
        id: "payment-m1-1-1",
        contract_id: "contract-m1-1",
        amount_cents: 10000,
        status: "paid",
        created_at: "2025-08-20T15:30:00Z",
        milestone_id: "milestone-1-1",
        payment_date: "2025-08-25T00:00:00Z",
      },
      {
        id: "payment-m1-1-2",
        contract_id: "contract-m1-1",
        amount_cents: 12000,
        status: "pending",
        created_at: "2025-09-05T15:30:00Z",
        milestone_id: "milestone-1-1",
        payment_date: null,
      },
    ],
  },
  "milestone-1-2": {
    id: "contract-m1-2",
    project_id: "project-1",
    title: "Core App Features Contract",
    description: "Contract for implementing core app functionality",
    status: "active",
    start_date: "2025-09-16T00:00:00Z",
    end_date: "2025-10-15T00:00:00Z",
    created_at: "2025-09-15T12:00:00Z",
    updated_at: "2025-09-15T12:00:00Z",
    client_name: "MobileApp Inc",
    client_company: "Mobile Solutions LLC",
    currency: "USD",
    total_amount_cents: 30000,
    upwork_contract_id: "upwork-123456-m2",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-2",
        display_name: "Bob Johnson",
        email: "bob@example.com",
        avatar_url: "/avatars/bob.jpg",
        role: "developer",
        hasApproved: true,
      },
    ],
    payments: [
      {
        id: "payment-m1-2-1",
        contract_id: "contract-m1-2",
        amount_cents: 30000,
        status: "pending",
        created_at: "2025-09-15T12:30:00Z",
        milestone_id: "milestone-1-2",
        payment_date: null,
      },
    ],
  },
  "milestone-1-3": {
    id: "contract-m1-3",
    project_id: "project-1",
    title: "Advanced Features Contract",
    description: "Contract for advanced app features",
    status: "draft",
    start_date: "2025-10-16T00:00:00Z",
    end_date: "2025-11-30T00:00:00Z",
    created_at: "2025-10-15T10:00:00Z",
    updated_at: "2025-10-15T10:00:00Z",
    client_name: "MobileApp Inc",
    client_company: "Mobile Solutions LLC",
    currency: "USD",
    total_amount_cents: 25000,
    upwork_contract_id: "upwork-123456-m3",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-2",
        display_name: "Bob Johnson",
        email: "bob@example.com",
        avatar_url: "/avatars/bob.jpg",
        role: "developer",
        hasApproved: false,
      },
    ],
    payments: [
      {
        id: "payment-m1-3-1",
        contract_id: "contract-m1-3",
        amount_cents: 25000,
        status: "pending",
        created_at: "2025-10-15T10:30:00Z",
        milestone_id: "milestone-1-3",
        payment_date: null,
      },
    ],
  },
  "milestone-1-4": {
    id: "contract-m1-4",
    project_id: "project-1",
    title: "Performance Optimization Contract",
    description: "Contract for app performance optimization",
    status: "draft",
    start_date: "2025-12-01T00:00:00Z",
    end_date: "2025-12-15T00:00:00Z",
    created_at: "2025-11-25T09:00:00Z",
    updated_at: "2025-11-25T09:00:00Z",
    client_name: "MobileApp Inc",
    client_company: "Mobile Solutions LLC",
    currency: "USD",
    total_amount_cents: 15000,
    upwork_contract_id: "upwork-123456-m4",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: false,
      },
      {
        id: "user-2",
        display_name: "Bob Johnson",
        email: "bob@example.com",
        avatar_url: "/avatars/bob.jpg",
        role: "developer",
        hasApproved: false,
      },
    ],
    payments: [
      {
        id: "payment-m1-4-1",
        contract_id: "contract-m1-4",
        amount_cents: 15000,
        status: "pending",
        created_at: "2025-11-25T09:30:00Z",
        milestone_id: "milestone-1-4",
        payment_date: null,
      },
    ],
  },

  // Project 2 Milestone Contracts
  "milestone-2-1": {
    id: "contract-m2-1",
    project_id: "project-2",
    title: "Initial Design Phase Contract",
    description: "Contract for website redesign initial design phase",
    status: "active",
    start_date: "2025-09-01T00:00:00Z",
    end_date: "2025-09-30T00:00:00Z",
    created_at: "2025-08-30T14:00:00Z",
    updated_at: "2025-08-30T14:00:00Z",
    client_name: "WebDesign Co",
    client_company: "Web Solutions Inc",
    currency: "USD",
    total_amount_cents: 12000,
    upwork_contract_id: "upwork-234567-m1",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-4",
        display_name: "Tom Wilson",
        email: "tom@example.com",
        avatar_url: "/avatars/tom.jpg",
        role: "developer",
        hasApproved: true,
      },
    ],
    payments: [
      {
        id: "payment-m2-1-1",
        contract_id: "contract-m2-1",
        amount_cents: 6000,
        status: "paid",
        created_at: "2025-09-15T14:30:00Z",
        milestone_id: "milestone-2-1",
        payment_date: "2025-09-17T00:00:00Z",
      },
      {
        id: "payment-m2-1-2",
        contract_id: "contract-m2-1",
        amount_cents: 6000,
        status: "pending",
        created_at: "2025-09-25T14:30:00Z",
        milestone_id: "milestone-2-1",
        payment_date: null,
      },
    ],
  },
  "milestone-2-2": {
    id: "contract-m2-2",
    project_id: "project-2",
    title: "Secondary Pages Contract",
    description: "Contract for redesigning secondary website pages",
    status: "draft",
    start_date: "2025-10-01T00:00:00Z",
    end_date: "2025-10-30T00:00:00Z",
    created_at: "2025-09-25T14:00:00Z",
    updated_at: "2025-09-25T14:00:00Z",
    client_name: "WebDesign Co",
    client_company: "Web Solutions Inc",
    currency: "USD",
    total_amount_cents: 15000,
    upwork_contract_id: "upwork-234567-m2",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-4",
        display_name: "Tom Wilson",
        email: "tom@example.com",
        avatar_url: "/avatars/tom.jpg",
        role: "developer",
        hasApproved: false,
      },
    ],
    payments: [
      {
        id: "payment-m2-2-1",
        contract_id: "contract-m2-2",
        amount_cents: 15000,
        status: "pending",
        created_at: "2025-09-25T14:30:00Z",
        milestone_id: "milestone-2-2",
        payment_date: null,
      },
    ],
  },

  // Project 3 Milestone Contracts
  "milestone-3-1": {
    id: "contract-m3-1",
    project_id: "project-3",
    title: "Backend Infrastructure Contract",
    description: "Contract for e-commerce backend infrastructure",
    status: "active",
    start_date: "2025-10-10T00:00:00Z",
    end_date: "2025-11-15T00:00:00Z",
    created_at: "2025-10-09T13:00:00Z",
    updated_at: "2025-10-09T13:00:00Z",
    client_name: "ShopSmart",
    client_company: "Retail Solutions Group",
    currency: "USD",
    total_amount_cents: 18000,
    upwork_contract_id: "upwork-345678-m1",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-6",
        display_name: "Mike Davis",
        email: "mike@example.com",
        avatar_url: "/avatars/mike.jpg",
        role: "developer",
        hasApproved: true,
      },
    ],
    payments: [
      {
        id: "payment-m3-1-1",
        contract_id: "contract-m3-1",
        amount_cents: 9000,
        status: "paid",
        created_at: "2025-10-25T13:30:00Z",
        milestone_id: "milestone-3-1",
        payment_date: "2025-10-27T00:00:00Z",
      },
      {
        id: "payment-m3-1-2",
        contract_id: "contract-m3-1",
        amount_cents: 9000,
        status: "pending",
        created_at: "2025-11-01T13:30:00Z",
        milestone_id: "milestone-3-1",
        payment_date: null,
      },
    ],
  },
};

// Create mock data with multiple projects, each with its own tasks, members, milestones, etc.
const mockProjects = [
  {
    id: "project-1",
    name: "Mobile App Development",
    slug: "mobile-app",
    description: "Building a cross-platform mobile application",
    created_at: "2025-08-15T12:00:00Z",
    updated_at: "2025-08-15T12:00:00Z",
    // Adding missing fields
    current_milestone_id: "milestone-1-1",
    github_owner: "mobile-app-org",
    github_repo: "mobile-app",
    github_repo_url: "https://github.com/mobile-app-org/mobile-app",
    icon_color_bg: "#FF9800",
    icon_color_fg: "#FFFFFF",
    icon_name: "smartphone",
    status: "active",
    subscription_status: "active",
  },
  {
    id: "project-2",
    name: "Website Redesign",
    slug: "website-redesign",
    description: "Complete overhaul of company website",
    created_at: "2025-09-01T10:30:00Z",
    updated_at: "2025-09-01T10:30:00Z",
    // Adding missing fields
    current_milestone_id: "milestone-2-1",
    github_owner: "website-redesign-org",
    github_repo: "website-redesign",
    github_repo_url: "https://github.com/website-redesign-org/website-redesign",
    icon_color_bg: "#2196F3",
    icon_color_fg: "#FFFFFF",
    icon_name: "globe",
    status: "active",
    subscription_status: "active",
  },
  {
    id: "project-3",
    name: "E-commerce Platform",
    slug: "ecommerce-platform",
    description: "Building an online store with payment integration",
    created_at: "2025-10-10T09:15:00Z",
    updated_at: "2025-10-10T09:15:00Z",
    // Adding missing fields
    current_milestone_id: "milestone-3-1",
    github_owner: "ecommerce-platform-org",
    github_repo: "ecommerce-platform",
    github_repo_url:
      "https://github.com/ecommerce-platform-org/ecommerce-platform",
    icon_color_bg: "#4CAF50",
    icon_color_fg: "#FFFFFF",
    icon_name: "shopping-cart",
    status: "active",
    subscription_status: "active",
  },
];

// Project members for each project
const mockProjectMembers = {
  "project-1": [
    {
      id: "pm-1-1",
      project_id: "project-1",
      user_id: "user-1",
      role: "owner",
      created_at: "2025-08-15T12:00:00Z",
      profile: {
        id: "user-1",
        display_name: "Jane Smith",
        avatar_url: "/avatars/jane.jpg",
        professional_title: "Project Manager",
      },
    },
    {
      id: "pm-1-2",
      project_id: "project-1",
      user_id: "user-2",
      role: "developer",
      created_at: "2025-08-16T09:30:00Z",
      profile: {
        id: "user-2",
        display_name: "Bob Johnson",
        avatar_url: "/avatars/bob.jpg",
        professional_title: "Mobile Developer",
      },
    },
    {
      id: "pm-1-3",
      project_id: "project-1",
      user_id: "user-3",
      role: "designer",
      created_at: "2025-08-16T10:15:00Z",
      profile: {
        id: "user-3",
        display_name: "Alice Wang",
        avatar_url: "/avatars/alice.jpg",
        professional_title: "UI/UX Designer",
      },
    },
  ],
  "project-2": [
    {
      id: "pm-2-1",
      project_id: "project-2",
      user_id: "user-1",
      role: "owner",
      created_at: "2025-09-01T10:30:00Z",
      profile: {
        id: "user-1",
        display_name: "Jane Smith",
        avatar_url: "/avatars/jane.jpg",
        professional_title: "Project Manager",
      },
    },
    {
      id: "pm-2-2",
      project_id: "project-2",
      user_id: "user-4",
      role: "developer",
      created_at: "2025-09-02T11:00:00Z",
      profile: {
        id: "user-4",
        display_name: "Tom Wilson",
        avatar_url: "/avatars/tom.jpg",
        professional_title: "Frontend Developer",
      },
    },
    {
      id: "pm-2-3",
      project_id: "project-2",
      user_id: "user-5",
      role: "content",
      created_at: "2025-09-02T14:20:00Z",
      profile: {
        id: "user-5",
        display_name: "Sarah Miller",
        avatar_url: "/avatars/sarah.jpg",
        professional_title: "Content Strategist",
      },
    },
  ],
  "project-3": [
    {
      id: "pm-3-1",
      project_id: "project-3",
      user_id: "user-1",
      role: "owner",
      created_at: "2025-10-10T09:15:00Z",
      profile: {
        id: "user-1",
        display_name: "Jane Smith",
        avatar_url: "/avatars/jane.jpg",
        professional_title: "Project Manager",
      },
    },
    {
      id: "pm-3-2",
      project_id: "project-3",
      user_id: "user-6",
      role: "developer",
      created_at: "2025-10-11T13:45:00Z",
      profile: {
        id: "user-6",
        display_name: "Mike Davis",
        avatar_url: "/avatars/mike.jpg",
        professional_title: "Backend Developer",
      },
    },
    {
      id: "pm-3-3",
      project_id: "project-3",
      user_id: "user-7",
      role: "qa",
      created_at: "2025-10-12T10:00:00Z",
      profile: {
        id: "user-7",
        display_name: "Emily Chen",
        avatar_url: "/avatars/emily.jpg",
        professional_title: "QA Engineer",
      },
    },
  ],
};

// Milestones for each project
const mockMilestones = {
  "project-1": [
    {
      id: "milestone-1-1",
      project_id: "project-1",
      title: "Authentication & Login",
      description: "Complete authentication flow and login screens",
      status: "active", // This is the active milestone
      due_date: "2025-09-15T00:00:00Z",
      created_at: "2025-08-15T12:30:00Z",
      updated_at: "2025-08-15T12:30:00Z",
      payment_cents: 0,
      payment_status: "pending",
      is_current: true,
      tasks_count: 5,
      tasks_completed: 3,
      tasks: [
        createTaskWithDetails(
          "task-1-1",
          "Design UI Mockups",
          "project-1",
          "user-3",
          {
            id: "user-3",
            display_name: "Alice Wang",
            avatar_url: "/avatars/alice.jpg",
            professional_title: "UI/UX Designer",
          },
          "todo",
          "high",
          5000,
          "Create all UI mockups for login, registration, and password reset screens",
          ["design", "ui"],
          480,
          420,
          null,
          {
            due_date: "2025-08-22T00:00:00Z",
            start_date: "2025-08-16T00:00:00Z",
            estimated_hours: 8,
            actual_hours: 7,
            completed_at: "2025-08-21T16:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-1-2",
          "Implement Login Screen",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "completed",
          "high",
          6000,
          "Implement the login screen according to the UI mockups, including validation and error handling",
          ["frontend", "auth"],
          600,
          580,
          null,
          {
            due_date: "2025-08-30T00:00:00Z",
            start_date: "2025-08-23T00:00:00Z",
            estimated_hours: 10,
            actual_hours: 9.5,
            completed_at: "2025-08-29T17:45:00Z",
          },
        ),
        createTaskWithDetails(
          "task-1-3",
          "User Registration Flow",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "completed",
          "high",
          7000,
          "Implement the complete user registration flow with email verification",
          ["frontend", "auth"],
          720,
          750,
          null,
          {
            due_date: "2025-09-06T00:00:00Z",
            start_date: "2025-08-31T00:00:00Z",
            estimated_hours: 12,
            actual_hours: 12.5,
            completed_at: "2025-09-05T18:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-1-4",
          "Password Reset Functionality",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "in_progress",
          "medium",
          4000,
          "Implement password reset functionality with email confirmation",
          ["frontend", "auth", "security"],
          480,
          240,
          1693396800000,
          {
            due_date: "2025-09-12T00:00:00Z",
            start_date: "2025-09-06T00:00:00Z",
            estimated_hours: 8,
            actual_hours: 4,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-5",
          "OAuth Integration",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "todo",
          "medium",
          8000,
          "Integrate Google, Facebook, and Apple OAuth login options",
          ["frontend", "auth", "integration"],
          960,
          0,
          null,
          {
            due_date: "2025-09-15T00:00:00Z",
            start_date: "2025-09-09T00:00:00Z",
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-1-1",
          title: "Design Review",
          date: "2025-08-25T15:00:00Z",
        },
        { id: "event-1-2", title: "QA Testing", date: "2025-09-10T10:00:00Z" },
      ],
      start_date: "2025-08-15T12:30:00Z",
      priority: "high",
      assigned_to: "user-1",
      tags: ["frontend", "security"],
    },
    {
      id: "milestone-1-2",
      project_id: "project-1",
      title: "Core App Features",
      description: "Implement main app functionality",
      status: "draft",
      due_date: "2025-10-15T00:00:00Z",
      created_at: "2025-08-15T12:45:00Z",
      updated_at: "2025-08-15T12:45:00Z",
      payment_cents: 0,
      payment_status: "pending",
      is_current: false,
      tasks_count: 4,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-1-6",
          "Implement Home Screen",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "draft",
          "high",
          9000,
          "Design and implement the main home screen with navigation",
          ["frontend", "ui"],
          1080,
          0,
          null,
          {
            due_date: "2025-09-30T00:00:00Z",
            start_date: null,
            estimated_hours: 18,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-7",
          "User Profile Management",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "draft",
          "medium",
          7000,
          "Implement profile editing and management screens",
          ["frontend", "profile"],
          840,
          0,
          null,
          {
            due_date: "2025-10-07T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-8",
          "Notification System",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "draft",
          "medium",
          8000,
          "Implement push notifications and in-app notification center",
          ["frontend", "notifications"],
          960,
          0,
          null,
          {
            due_date: "2025-10-15T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-9",
          "Search Functionality",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "draft",
          "low",
          6000,
          "Implement search bar and results display with filtering options",
          ["frontend", "search"],
          720,
          0,
          null,
          {
            due_date: "2025-10-15T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-1-3",
          title: "Sprint Planning",
          date: "2025-09-20T09:00:00Z",
        },
      ],
      start_date: null,
      priority: "medium",
      assigned_to: "user-2",
      tags: ["frontend", "core"],
    },
    {
      id: "milestone-1-3",
      project_id: "project-1",
      title: "Advanced Features",
      description: "Implement secondary and advanced app capabilities",
      status: "completed",
      due_date: "2025-11-30T00:00:00Z",
      created_at: "2025-08-15T12:55:00Z",
      updated_at: "2025-08-15T12:55:00Z",
      payment_cents: 25000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 5,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-1-10",
          "Offline Mode Support",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "completed",
          "medium",
          10000,
          "Implement offline caching and data synchronization",
          ["frontend", "offline", "advanced"],
          1200,
          0,
          null,
          {
            due_date: "2025-10-31T00:00:00Z",
            start_date: null,
            estimated_hours: 20,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-11",
          "Data Synchronization",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "completed",
          "high",
          8000,
          "Implement data syncing between offline and online states",
          ["frontend", "synchronization", "advanced"],
          960,
          0,
          null,
          {
            due_date: "2025-11-10T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-12",
          "Deep Linking",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "completed",
          "low",
          5000,
          "Implement deep linking for direct navigation to app sections",
          ["frontend", "navigation", "advanced"],
          600,
          0,
          null,
          {
            due_date: "2025-11-15T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-13",
          "Analytics Implementation",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "completed",
          "medium",
          6000,
          "Integrate analytics tracking throughout the app",
          ["frontend", "analytics", "advanced"],
          720,
          0,
          null,
          {
            due_date: "2025-11-20T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-14",
          "A/B Testing Framework",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "completed",
          "low",
          7000,
          "Implement a framework for A/B testing features",
          ["frontend", "testing", "advanced"],
          840,
          0,
          null,
          {
            due_date: "2025-11-30T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "low",
      assigned_to: "user-3",
      tags: ["frontend", "advanced"],
    },
    {
      id: "milestone-1-4",
      project_id: "project-1",
      title: "Performance Optimization",
      description: "Optimize app performance and resource usage",
      status: "draft",
      due_date: "2025-12-15T00:00:00Z",
      created_at: "2025-08-15T13:10:00Z",
      updated_at: "2025-08-15T13:10:00Z",
      payment_cents: 15000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 3,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-1-15",
          "Image Loading Optimization",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "draft",
          "high",
          5000,
          "Optimize image loading and caching",
          ["frontend", "performance", "optimization"],
          600,
          0,
          null,
          {
            due_date: "2025-12-05T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-16",
          "Memory Management",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "draft",
          "medium",
          6000,
          "Implement improved memory management and resource cleanup",
          ["frontend", "performance", "optimization"],
          720,
          0,
          null,
          {
            due_date: "2025-12-10T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-1-17",
          "App Startup Time Improvement",
          "project-1",
          "user-2",
          {
            id: "user-2",
            display_name: "Bob Johnson",
            avatar_url: "/avatars/bob.jpg",
            professional_title: "Mobile Developer",
          },
          "draft",
          "high",
          4000,
          "Optimize app startup time and initial loading",
          ["frontend", "performance", "optimization"],
          480,
          0,
          null,
          {
            due_date: "2025-12-15T00:00:00Z",
            start_date: null,
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "medium",
      assigned_to: "user-1",
      tags: ["optimization", "performance"],
    },
  ],
  "project-2": [
    {
      id: "milestone-2-1",
      project_id: "project-2",
      title: "Initial Design Phase",
      description: "Complete primary website structure and homepage",
      status: "active",
      due_date: "2025-09-30T00:00:00Z",
      created_at: "2025-09-01T11:00:00Z",
      updated_at: "2025-09-01T11:00:00Z",
      payment_cents: 0,
      payment_status: "pending",
      is_current: true,
      tasks_count: 4,
      tasks_completed: 2,
      tasks: [
        createTaskWithDetails(
          "task-2-1",
          "Information Architecture",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "completed",
          "high",
          4000,
          "Define site structure, navigation hierarchy, and content organization",
          ["design", "planning"],
          480,
          510,
          null,
          {
            due_date: "2025-09-10T00:00:00Z",
            start_date: "2025-09-01T00:00:00Z",
            estimated_hours: 8,
            actual_hours: 8.5,
            completed_at: "2025-09-09T15:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-2-2",
          "Homepage Redesign",
          "project-2",
          "user-5",
          {
            id: "user-5",
            display_name: "Sarah Miller",
            avatar_url: "/avatars/sarah.jpg",
            professional_title: "Content Strategist",
          },
          "completed",
          "high",
          6000,
          "Redesign homepage layout, hero section, and feature highlights",
          ["design", "frontend"],
          720,
          690,
          null,
          {
            due_date: "2025-09-15T00:00:00Z",
            start_date: "2025-09-06T00:00:00Z",
            estimated_hours: 12,
            actual_hours: 11.5,
            completed_at: "2025-09-14T17:00:00Z",
          },
        ),
        createTaskWithDetails(
          "task-2-3",
          "Design System Creation",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "in_progress",
          "high",
          8000,
          "Create a comprehensive design system with typography, colors, components, and guidelines",
          ["design", "ui"],
          960,
          540,
          1693911600000,
          {
            due_date: "2025-09-25T00:00:00Z",
            start_date: "2025-09-15T00:00:00Z",
            estimated_hours: 16,
            actual_hours: 9,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-4",
          "Responsive Layout Implementation",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "todo",
          "medium",
          7000,
          "Implement responsive layouts for all screen sizes",
          ["frontend", "responsive"],
          840,
          0,
          null,
          {
            due_date: "2025-09-30T00:00:00Z",
            start_date: "2025-09-20T00:00:00Z",
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-2-1",
          title: "Stakeholder Review",
          date: "2025-09-15T14:00:00Z",
        },
      ],
      start_date: "2025-09-01T11:00:00Z",
      priority: "high",
      assigned_to: "user-4",
      tags: ["design", "frontend"],
    },
    {
      id: "milestone-2-2",
      project_id: "project-2",
      title: "Secondary Pages",
      description: "Update all remaining pages with new design",
      status: "draft",
      due_date: "2025-10-30T00:00:00Z",
      created_at: "2025-09-01T11:15:00Z",
      updated_at: "2025-09-01T11:15:00Z",
      payment_cents: 0,
      payment_status: "pending",
      is_current: false,
      tasks_count: 5,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-2-5",
          "About Page Redesign",
          "project-2",
          "user-5",
          {
            id: "user-5",
            display_name: "Sarah Miller",
            avatar_url: "/avatars/sarah.jpg",
            professional_title: "Content Strategist",
          },
          "draft",
          "medium",
          4000,
          "Redesign the About page with company story and team sections",
          ["design", "content"],
          480,
          0,
          null,
          {
            due_date: "2025-10-10T00:00:00Z",
            start_date: null,
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-6",
          "Contact Page Implementation",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "medium",
          5000,
          "Implement contact form, map integration, and office locations",
          ["frontend", "content"],
          600,
          0,
          null,
          {
            due_date: "2025-10-15T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-7",
          "Products Catalog Page",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "high",
          7000,
          "Design and implement products catalog with filtering and sorting options",
          ["frontend", "ui"],
          840,
          0,
          null,
          {
            due_date: "2025-10-20T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-8",
          "Blog Section Design",
          "project-2",
          "user-5",
          {
            id: "user-5",
            display_name: "Sarah Miller",
            avatar_url: "/avatars/sarah.jpg",
            professional_title: "Content Strategist",
          },
          "draft",
          "medium",
          6000,
          "Design blog listing and article pages with categories and tags",
          ["design", "content"],
          720,
          0,
          null,
          {
            due_date: "2025-10-25T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-9",
          "FAQ Page Creation",
          "project-2",
          "user-5",
          {
            id: "user-5",
            display_name: "Sarah Miller",
            avatar_url: "/avatars/sarah.jpg",
            professional_title: "Content Strategist",
          },
          "draft",
          "low",
          3000,
          "Develop FAQ page with expandable sections and search functionality",
          ["content", "ui"],
          360,
          0,
          null,
          {
            due_date: "2025-10-30T00:00:00Z",
            start_date: null,
            estimated_hours: 6,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "medium",
      assigned_to: "user-5",
      tags: ["design", "content"],
    },
    {
      id: "milestone-2-3",
      project_id: "project-2",
      title: "CMS Integration",
      description: "Implement content management system functionality",
      status: "draft",
      due_date: "2025-11-15T00:00:00Z",
      created_at: "2025-09-01T11:30:00Z",
      updated_at: "2025-09-01T11:30:00Z",
      payment_cents: 30000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 4,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-2-10",
          "CMS Selection and Setup",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "high",
          8000,
          "Research, select, and configure appropriate CMS platform",
          ["backend", "cms"],
          960,
          0,
          null,
          {
            due_date: "2025-11-05T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-11",
          "Content Migration",
          "project-2",
          "user-5",
          {
            id: "user-5",
            display_name: "Sarah Miller",
            avatar_url: "/avatars/sarah.jpg",
            professional_title: "Content Strategist",
          },
          "draft",
          "medium",
          10000,
          "Migrate existing content to new CMS with proper formatting and media",
          ["content", "migration"],
          1200,
          0,
          null,
          {
            due_date: "2025-11-10T00:00:00Z",
            start_date: null,
            estimated_hours: 20,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-12",
          "User Roles Configuration",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "low",
          4000,
          "Set up user roles, permissions, and access controls in CMS",
          ["backend", "security"],
          480,
          0,
          null,
          {
            due_date: "2025-11-12T00:00:00Z",
            start_date: null,
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-13",
          "Editorial Workflow Implementation",
          "project-2",
          "user-5",
          {
            id: "user-5",
            display_name: "Sarah Miller",
            avatar_url: "/avatars/sarah.jpg",
            professional_title: "Content Strategist",
          },
          "draft",
          "medium",
          8000,
          "Configure editorial workflows, content approval process, and publishing controls",
          ["content", "workflow"],
          960,
          0,
          null,
          {
            due_date: "2025-11-15T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-2-2",
          title: "CMS Training Session",
          date: "2025-11-10T13:00:00Z",
        },
      ],
      start_date: null,
      priority: "high",
      assigned_to: "user-6",
      tags: ["backend", "content"],
    },
    {
      id: "milestone-2-4",
      project_id: "project-2",
      title: "SEO Optimization",
      description: "Implement SEO best practices across the website",
      status: "draft",
      due_date: "2025-12-01T00:00:00Z",
      created_at: "2025-09-01T11:45:00Z",
      updated_at: "2025-09-01T11:45:00Z",
      payment_cents: 15000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 3,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-2-14",
          "Metadata Implementation",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "high",
          5000,
          "Implement SEO metadata for all pages including title tags, meta descriptions, and OG tags",
          ["seo", "frontend"],
          600,
          0,
          null,
          {
            due_date: "2025-11-20T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-15",
          "Sitemap Generation",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "medium",
          3000,
          "Generate XML sitemap and implement robots.txt",
          ["seo", "technical"],
          360,
          0,
          null,
          {
            due_date: "2025-11-25T00:00:00Z",
            start_date: null,
            estimated_hours: 6,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-2-16",
          "Schema Markup Integration",
          "project-2",
          "user-4",
          {
            id: "user-4",
            display_name: "Tom Wilson",
            avatar_url: "/avatars/tom.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "medium",
          7000,
          "Implement JSON-LD schema markup for products, organization, and articles",
          ["seo", "technical"],
          840,
          0,
          null,
          {
            due_date: "2025-12-01T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "medium",
      assigned_to: "user-7",
      tags: ["seo", "marketing"],
    },
  ],
  "project-3": [
    {
      id: "milestone-3-1",
      project_id: "project-3",
      title: "Backend Infrastructure",
      description: "Set up database and core APIs",
      status: "active",
      due_date: "2025-11-15T00:00:00Z",
      created_at: "2025-10-10T10:00:00Z",
      updated_at: "2025-10-10T10:00:00Z",
      payment_cents: 0,
      payment_status: "pending",
      is_current: true,
      tasks_count: 5,
      tasks_completed: 2,
      tasks: [
        createTaskWithDetails(
          "task-3-1",
          "Database Schema Design",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "completed",
          "high",
          9000,
          "Design database schema with tables for products, users, orders, and inventory",
          ["backend", "database"],
          1080,
          960,
          null,
          {
            due_date: "2025-10-20T00:00:00Z",
            start_date: "2025-10-10T00:00:00Z",
            estimated_hours: 18,
            actual_hours: 16,
            completed_at: "2025-10-18T16:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-3-2",
          "Product Catalog API",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "completed",
          "high",
          8000,
          "Develop REST API endpoints for product catalog management",
          ["backend", "api"],
          960,
          1020,
          null,
          {
            due_date: "2025-10-25T00:00:00Z",
            start_date: "2025-10-18T00:00:00Z",
            estimated_hours: 16,
            actual_hours: 17,
            completed_at: "2025-10-24T18:45:00Z",
          },
        ),
        createTaskWithDetails(
          "task-3-3",
          "User Management API",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "in_progress",
          "high",
          7000,
          "Develop API endpoints for user registration, authentication, and profile management",
          ["backend", "api", "auth"],
          840,
          420,
          1698051600000,
          {
            due_date: "2025-11-01T00:00:00Z",
            start_date: "2025-10-25T00:00:00Z",
            estimated_hours: 14,
            actual_hours: 7,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-4",
          "Authentication Service",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "todo",
          "high",
          6000,
          "Implement JWT-based authentication service with refresh tokens",
          ["backend", "auth", "security"],
          720,
          0,
          null,
          {
            due_date: "2025-11-08T00:00:00Z",
            start_date: "2025-11-01T00:00:00Z",
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-5",
          "API Documentation",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "todo",
          "medium",
          4000,
          "Generate comprehensive API documentation with Swagger/OpenAPI",
          ["backend", "documentation"],
          480,
          0,
          null,
          {
            due_date: "2025-11-15T00:00:00Z",
            start_date: "2025-11-08T00:00:00Z",
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-3-1",
          title: "Architecture Review",
          date: "2025-10-20T11:00:00Z",
        },
      ],
      start_date: "2025-10-10T10:00:00Z",
      priority: "high",
      assigned_to: "user-8",
      tags: ["backend", "infrastructure"],
    },
    {
      id: "milestone-3-2",
      project_id: "project-3",
      title: "E-commerce Features",
      description: "Implement checkout and payment processing",
      status: "draft",
      due_date: "2025-12-15T00:00:00Z",
      created_at: "2025-10-10T10:15:00Z",
      updated_at: "2025-10-10T10:15:00Z",
      payment_cents: 0,
      payment_status: "pending",
      is_current: false,
      tasks_count: 4,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-3-6",
          "Payment Gateway Integration",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          10000,
          "Integrate Stripe and PayPal payment gateways with secure processing",
          ["backend", "payments", "integration"],
          1200,
          0,
          null,
          {
            due_date: "2025-11-30T00:00:00Z",
            start_date: null,
            estimated_hours: 20,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-7",
          "Shopping Cart Implementation",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          8000,
          "Implement shopping cart functionality with inventory management",
          ["backend", "cart"],
          960,
          0,
          null,
          {
            due_date: "2025-12-07T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-8",
          "Order Processing System",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          9000,
          "Implement order creation, tracking, and fulfillment workflows",
          ["backend", "orders"],
          1080,
          0,
          null,
          {
            due_date: "2025-12-15T00:00:00Z",
            start_date: null,
            estimated_hours: 18,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-9",
          "Inventory Management",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          7000,
          "Implement inventory tracking, stock updates, and notifications",
          ["backend", "inventory"],
          840,
          0,
          null,
          {
            due_date: "2025-12-15T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "high",
      assigned_to: "user-9",
      tags: ["backend", "e-commerce"],
    },
    {
      id: "milestone-3-3",
      project_id: "project-3",
      title: "Admin Dashboard",
      description: "Create administrative interface for store management",
      status: "draft",
      due_date: "2024-01-15T00:00:00Z",
      created_at: "2025-10-10T10:30:00Z",
      updated_at: "2025-10-10T10:30:00Z",
      payment_cents: 25000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 5,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-3-10",
          "Dashboard Overview Page",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          6000,
          "Create admin dashboard homepage with key metrics and charts",
          ["frontend", "admin", "dashboard"],
          720,
          0,
          null,
          {
            due_date: "2025-12-25T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-11",
          "Order Management Interface",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          8000,
          "Develop order listing, search, filtering, and detail views",
          ["frontend", "admin", "orders"],
          960,
          0,
          null,
          {
            due_date: "2024-01-05T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-12",
          "Product Management System",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          9000,
          "Create product management interface with bulk operations",
          ["frontend", "admin", "products"],
          1080,
          0,
          null,
          {
            due_date: "2024-01-10T00:00:00Z",
            start_date: null,
            estimated_hours: 18,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-13",
          "Customer Management",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          5000,
          "Implement customer listing, profile viewing, and management tools",
          ["frontend", "admin", "customers"],
          600,
          0,
          null,
          {
            due_date: "2024-01-15T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-14",
          "Sales Reports and Analytics",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          7000,
          "Create sales reports, analytics dashboards, and export functionality",
          ["frontend", "admin", "analytics"],
          840,
          0,
          null,
          {
            due_date: "2024-01-15T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-3-2",
          title: "Admin UI Planning",
          date: "2025-12-20T14:00:00Z",
        },
      ],
      start_date: null,
      priority: "medium",
      assigned_to: "user-10",
      tags: ["frontend", "admin"],
    },
    {
      id: "milestone-3-4",
      project_id: "project-3",
      title: "Customer Account Features",
      description: "Implement user account and order history capabilities",
      status: "draft",
      due_date: "2024-02-15T00:00:00Z",
      created_at: "2025-10-10T10:45:00Z",
      updated_at: "2025-10-10T10:45:00Z",
      payment_cents: 20000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 4,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-3-15",
          "User Profile Management",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          6000,
          "Implement customer profile management with account settings",
          ["frontend", "profile"],
          720,
          0,
          null,
          {
            due_date: "2024-01-25T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-16",
          "Order History Display",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          5000,
          "Create order history interface with filtering and details view",
          ["frontend", "orders"],
          600,
          0,
          null,
          {
            due_date: "2024-01-31T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-17",
          "Wishlist Functionality",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "low",
          4000,
          "Implement wishlist saving and management functionality",
          ["frontend", "wishlist"],
          480,
          0,
          null,
          {
            due_date: "2024-02-07T00:00:00Z",
            start_date: null,
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-3-18",
          "Saved Payment Methods",
          "project-3",
          "user-6",
          {
            id: "user-6",
            display_name: "Mike Davis",
            avatar_url: "/avatars/mike.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "low",
          5000,
          "Implement secure saved payment methods management",
          ["frontend", "payments", "security"],
          600,
          0,
          null,
          {
            due_date: "2024-02-15T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "low",
      assigned_to: "user-11",
      tags: ["frontend", "users"],
    },
  ],
  "project-4": [
    {
      id: "milestone-4-1",
      project_id: "project-4",
      title: "Research Phase",
      description: "Conduct market research and competitive analysis",
      status: "active",
      due_date: "2025-11-30T00:00:00Z",
      created_at: "2025-11-01T09:00:00Z",
      updated_at: "2025-11-01T09:00:00Z",
      payment_cents: 15000,
      payment_status: "paid",
      is_current: true,
      tasks_count: 4,
      tasks_completed: 3,
      tasks: [
        createTaskWithDetails(
          "task-4-1",
          "Market Trend Analysis",
          "project-4",
          "user-12",
          {
            id: "user-12",
            display_name: "Emily Johnson",
            avatar_url: "/avatars/emily-j.jpg",
            professional_title: "Market Researcher",
          },
          "completed",
          "high",
          6000,
          "Analyze current market trends and identify opportunities",
          ["research", "analysis"],
          720,
          690,
          null,
          {
            due_date: "2025-11-10T00:00:00Z",
            start_date: "2025-11-01T00:00:00Z",
            estimated_hours: 12,
            actual_hours: 11.5,
            completed_at: "2025-11-09T17:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-4-2",
          "Competitor Feature Assessment",
          "project-4",
          "user-12",
          {
            id: "user-12",
            display_name: "Emily Johnson",
            avatar_url: "/avatars/emily-j.jpg",
            professional_title: "Market Researcher",
          },
          "completed",
          "high",
          5000,
          "Evaluate competitor products and identify feature gaps",
          ["research", "competition"],
          600,
          630,
          null,
          {
            due_date: "2025-11-15T00:00:00Z",
            start_date: "2025-11-10T00:00:00Z",
            estimated_hours: 10,
            actual_hours: 10.5,
            completed_at: "2025-11-14T16:45:00Z",
          },
        ),
        createTaskWithDetails(
          "task-4-3",
          "User Interviews",
          "project-4",
          "user-12",
          {
            id: "user-12",
            display_name: "Emily Johnson",
            avatar_url: "/avatars/emily-j.jpg",
            professional_title: "Market Researcher",
          },
          "completed",
          "medium",
          8000,
          "Conduct user interviews to identify pain points and needs",
          ["research", "interviews"],
          960,
          1020,
          null,
          {
            due_date: "2025-11-20T00:00:00Z",
            start_date: "2025-11-12T00:00:00Z",
            estimated_hours: 16,
            actual_hours: 17,
            completed_at: "2025-11-19T19:00:00Z",
          },
        ),
        createTaskWithDetails(
          "task-4-4",
          "Survey Design and Distribution",
          "project-4",
          "user-12",
          {
            id: "user-12",
            display_name: "Emily Johnson",
            avatar_url: "/avatars/emily-j.jpg",
            professional_title: "Market Researcher",
          },
          "in_progress",
          "medium",
          4000,
          "Create and distribute market research survey",
          ["research", "survey"],
          480,
          300,
          1700485200000,
          {
            due_date: "2025-11-30T00:00:00Z",
            start_date: "2025-11-20T00:00:00Z",
            estimated_hours: 8,
            actual_hours: 5,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-4-1",
          title: "Research Findings Presentation",
          date: "2025-11-25T13:00:00Z",
        },
      ],
      start_date: "2025-11-01T09:00:00Z",
      priority: "high",
      assigned_to: "user-12",
      tags: ["research", "planning"],
    },
    {
      id: "milestone-4-2",
      project_id: "project-4",
      title: "Concept Development",
      description: "Create product concepts based on research findings",
      status: "draft",
      due_date: "2025-12-31T00:00:00Z",
      created_at: "2025-11-01T09:15:00Z",
      updated_at: "2025-11-01T09:15:00Z",
      payment_cents: 20000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 3,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-4-5",
          "Brainstorming Sessions",
          "project-4",
          "user-13",
          {
            id: "user-13",
            display_name: "Daniel Chen",
            avatar_url: "/avatars/daniel.jpg",
            professional_title: "Product Designer",
          },
          "draft",
          "high",
          5000,
          "Facilitate brainstorming sessions to generate product concepts",
          ["design", "ideation"],
          600,
          0,
          null,
          {
            due_date: "2025-12-10T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-4-6",
          "Concept Sketching",
          "project-4",
          "user-13",
          {
            id: "user-13",
            display_name: "Daniel Chen",
            avatar_url: "/avatars/daniel.jpg",
            professional_title: "Product Designer",
          },
          "draft",
          "high",
          7000,
          "Create concept sketches for top product ideas",
          ["design", "sketching"],
          840,
          0,
          null,
          {
            due_date: "2025-12-20T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-4-7",
          "Value Proposition Definition",
          "project-4",
          "user-13",
          {
            id: "user-13",
            display_name: "Daniel Chen",
            avatar_url: "/avatars/daniel.jpg",
            professional_title: "Product Designer",
          },
          "draft",
          "medium",
          4000,
          "Define clear value propositions for each product concept",
          ["strategy", "product"],
          480,
          0,
          null,
          {
            due_date: "2025-12-31T00:00:00Z",
            start_date: null,
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-4-2",
          title: "Concept Review Meeting",
          date: "2025-12-15T10:00:00Z",
        },
      ],
      start_date: null,
      priority: "high",
      assigned_to: "user-13",
      tags: ["design", "strategy"],
    },
    {
      id: "milestone-4-3",
      project_id: "project-4",
      title: "Prototype Development",
      description: "Create functional prototypes of approved concepts",
      status: "draft",
      due_date: "2024-02-28T00:00:00Z",
      created_at: "2025-11-01T09:30:00Z",
      updated_at: "2025-11-01T09:30:00Z",
      payment_cents: 30000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 4,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-4-8",
          "Low-fidelity Wireframing",
          "project-4",
          "user-14",
          {
            id: "user-14",
            display_name: "Jessica Park",
            avatar_url: "/avatars/jessica.jpg",
            professional_title: "UX Designer",
          },
          "draft",
          "high",
          6000,
          "Create low-fidelity wireframes for approved concepts",
          ["design", "wireframing"],
          720,
          0,
          null,
          {
            due_date: "2024-01-15T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-4-9",
          "High-fidelity UI Design",
          "project-4",
          "user-14",
          {
            id: "user-14",
            display_name: "Jessica Park",
            avatar_url: "/avatars/jessica.jpg",
            professional_title: "UX Designer",
          },
          "draft",
          "high",
          9000,
          "Create high-fidelity UI designs with full visual details",
          ["design", "ui"],
          1080,
          0,
          null,
          {
            due_date: "2024-01-31T00:00:00Z",
            start_date: null,
            estimated_hours: 18,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-4-10",
          "Interactive Prototype Creation",
          "project-4",
          "user-14",
          {
            id: "user-14",
            display_name: "Jessica Park",
            avatar_url: "/avatars/jessica.jpg",
            professional_title: "UX Designer",
          },
          "draft",
          "medium",
          8000,
          "Develop interactive prototypes for usability testing",
          ["design", "prototype"],
          960,
          0,
          null,
          {
            due_date: "2024-02-15T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-4-11",
          "Prototype Testing Setup",
          "project-4",
          "user-14",
          {
            id: "user-14",
            display_name: "Jessica Park",
            avatar_url: "/avatars/jessica.jpg",
            professional_title: "UX Designer",
          },
          "draft",
          "low",
          4000,
          "Prepare testing environment and scenarios for prototype evaluation",
          ["testing", "preparation"],
          480,
          0,
          null,
          {
            due_date: "2024-02-28T00:00:00Z",
            start_date: null,
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "medium",
      assigned_to: "user-14",
      tags: ["design", "prototyping"],
    },
    {
      id: "milestone-4-4",
      project_id: "project-4",
      title: "User Testing",
      description: "Conduct usability testing with target audiences",
      status: "draft",
      due_date: "2024-03-31T00:00:00Z",
      created_at: "2025-11-01T09:45:00Z",
      updated_at: "2025-11-01T09:45:00Z",
      payment_cents: 15000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 3,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-4-12",
          "Test Script Development",
          "project-4",
          "user-15",
          {
            id: "user-15",
            display_name: "Mark Williams",
            avatar_url: "/avatars/mark.jpg",
            professional_title: "UX Researcher",
          },
          "draft",
          "high",
          5000,
          "Develop comprehensive usability testing scripts",
          ["research", "testing"],
          600,
          0,
          null,
          {
            due_date: "2024-03-10T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-4-13",
          "Participant Recruitment",
          "project-4",
          "user-15",
          {
            id: "user-15",
            display_name: "Mark Williams",
            avatar_url: "/avatars/mark.jpg",
            professional_title: "UX Researcher",
          },
          "draft",
          "medium",
          6000,
          "Recruit and screen participants for usability testing",
          ["research", "recruitment"],
          720,
          0,
          null,
          {
            due_date: "2024-03-20T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-4-14",
          "Test Session Facilitation",
          "project-4",
          "user-15",
          {
            id: "user-15",
            display_name: "Mark Williams",
            avatar_url: "/avatars/mark.jpg",
            professional_title: "UX Researcher",
          },
          "draft",
          "high",
          8000,
          "Conduct usability testing sessions and collect feedback",
          ["research", "testing"],
          960,
          0,
          null,
          {
            due_date: "2024-03-31T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-4-3",
          title: "User Testing Results Review",
          date: "2024-03-15T14:00:00Z",
        },
      ],
      start_date: null,
      priority: "high",
      assigned_to: "user-15",
      tags: ["research", "testing"],
    },
  ],
  "project-5": [
    {
      id: "milestone-5-1",
      project_id: "project-5",
      title: "Data Migration Planning",
      description: "Plan and prepare for legacy system data migration",
      status: "active",
      due_date: "2025-12-15T00:00:00Z",
      created_at: "2025-11-15T14:00:00Z",
      updated_at: "2025-11-15T14:00:00Z",
      payment_cents: 10000,
      payment_status: "pending",
      is_current: true,
      tasks_count: 4,
      tasks_completed: 2,
      tasks: [
        createTaskWithDetails(
          "task-5-1",
          "Data Audit and Inventory",
          "project-5",
          "user-16",
          {
            id: "user-16",
            display_name: "Lisa Thompson",
            avatar_url: "/avatars/lisa.jpg",
            professional_title: "Data Analyst",
          },
          "completed",
          "high",
          5000,
          "Audit legacy data and create comprehensive inventory",
          ["data", "audit"],
          600,
          660,
          null,
          {
            due_date: "2025-11-25T00:00:00Z",
            start_date: "2025-11-15T00:00:00Z",
            estimated_hours: 10,
            actual_hours: 11,
            completed_at: "2025-11-24T17:15:00Z",
          },
        ),
        createTaskWithDetails(
          "task-5-2",
          "Migration Strategy Document",
          "project-5",
          "user-16",
          {
            id: "user-16",
            display_name: "Lisa Thompson",
            avatar_url: "/avatars/lisa.jpg",
            professional_title: "Data Analyst",
          },
          "completed",
          "high",
          4000,
          "Create comprehensive migration strategy and timeline",
          ["planning", "documentation"],
          480,
          450,
          null,
          {
            due_date: "2025-11-30T00:00:00Z",
            start_date: "2025-11-24T00:00:00Z",
            estimated_hours: 8,
            actual_hours: 7.5,
            completed_at: "2025-11-29T16:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-5-3",
          "Data Mapping Specification",
          "project-5",
          "user-16",
          {
            id: "user-16",
            display_name: "Lisa Thompson",
            avatar_url: "/avatars/lisa.jpg",
            professional_title: "Data Analyst",
          },
          "in_progress",
          "high",
          6000,
          "Create field-to-field mapping between legacy and new systems",
          ["data", "mapping"],
          720,
          360,
          1701345600000,
          {
            due_date: "2025-12-10T00:00:00Z",
            start_date: "2025-11-30T00:00:00Z",
            estimated_hours: 12,
            actual_hours: 6,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-4",
          "Risk Assessment and Mitigation Plan",
          "project-5",
          "user-16",
          {
            id: "user-16",
            display_name: "Lisa Thompson",
            avatar_url: "/avatars/lisa.jpg",
            professional_title: "Data Analyst",
          },
          "todo",
          "medium",
          3000,
          "Identify migration risks and develop mitigation strategies",
          ["planning", "risk"],
          360,
          0,
          null,
          {
            due_date: "2025-12-15T00:00:00Z",
            start_date: "2025-12-10T00:00:00Z",
            estimated_hours: 6,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-5-1",
          title: "Migration Strategy Review",
          date: "2025-12-01T11:00:00Z",
        },
      ],
      start_date: "2025-11-15T14:00:00Z",
      priority: "high",
      assigned_to: "user-16",
      tags: ["data", "planning"],
    },
    {
      id: "milestone-5-2",
      project_id: "project-5",
      title: "Migration Tool Development",
      description: "Develop custom tools for data transformation and migration",
      status: "draft",
      due_date: "2024-01-31T00:00:00Z",
      created_at: "2025-11-15T14:15:00Z",
      updated_at: "2025-11-15T14:15:00Z",
      payment_cents: 25000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 3,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-5-5",
          "ETL Process Implementation",
          "project-5",
          "user-17",
          {
            id: "user-17",
            display_name: "Ryan Patel",
            avatar_url: "/avatars/ryan.jpg",
            professional_title: "Data Engineer",
          },
          "draft",
          "high",
          12000,
          "Develop extraction, transformation, and loading processes",
          ["development", "etl"],
          1440,
          0,
          null,
          {
            due_date: "2024-01-15T00:00:00Z",
            start_date: null,
            estimated_hours: 24,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-6",
          "Data Validation Scripts",
          "project-5",
          "user-17",
          {
            id: "user-17",
            display_name: "Ryan Patel",
            avatar_url: "/avatars/ryan.jpg",
            professional_title: "Data Engineer",
          },
          "draft",
          "high",
          8000,
          "Create scripts to validate data before, during, and after migration",
          ["development", "validation"],
          960,
          0,
          null,
          {
            due_date: "2024-01-25T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-7",
          "Error Handling Mechanisms",
          "project-5",
          "user-17",
          {
            id: "user-17",
            display_name: "Ryan Patel",
            avatar_url: "/avatars/ryan.jpg",
            professional_title: "Data Engineer",
          },
          "draft",
          "medium",
          5000,
          "Implement error handling and logging mechanisms",
          ["development", "error-handling"],
          600,
          0,
          null,
          {
            due_date: "2024-01-31T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [],
      start_date: null,
      priority: "high",
      assigned_to: "user-17",
      tags: ["development", "data"],
    },
    {
      id: "milestone-5-3",
      project_id: "project-5",
      title: "Test Migration",
      description: "Execute trial migration in staging environment",
      status: "draft",
      due_date: "2024-02-29T00:00:00Z",
      created_at: "2025-11-15T14:30:00Z",
      updated_at: "2025-11-15T14:30:00Z",
      payment_cents: 15000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 4,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-5-8",
          "Staging Environment Setup",
          "project-5",
          "user-18",
          {
            id: "user-18",
            display_name: "Sophia Martinez",
            avatar_url: "/avatars/sophia.jpg",
            professional_title: "DevOps Engineer",
          },
          "draft",
          "high",
          7000,
          "Set up staging environment identical to production",
          ["infrastructure", "staging"],
          840,
          0,
          null,
          {
            due_date: "2024-02-05T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-9",
          "Test Migration Execution",
          "project-5",
          "user-17",
          {
            id: "user-17",
            display_name: "Ryan Patel",
            avatar_url: "/avatars/ryan.jpg",
            professional_title: "Data Engineer",
          },
          "draft",
          "high",
          6000,
          "Execute test migration with representative data sample",
          ["testing", "migration"],
          720,
          0,
          null,
          {
            due_date: "2024-02-15T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-10",
          "Data Verification and Validation",
          "project-5",
          "user-16",
          {
            id: "user-16",
            display_name: "Lisa Thompson",
            avatar_url: "/avatars/lisa.jpg",
            professional_title: "Data Analyst",
          },
          "draft",
          "high",
          8000,
          "Thoroughly verify and validate migrated data integrity",
          ["testing", "validation"],
          960,
          0,
          null,
          {
            due_date: "2024-02-25T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-11",
          "Performance Optimization",
          "project-5",
          "user-17",
          {
            id: "user-17",
            display_name: "Ryan Patel",
            avatar_url: "/avatars/ryan.jpg",
            professional_title: "Data Engineer",
          },
          "draft",
          "medium",
          5000,
          "Optimize migration process for speed and resource usage",
          ["performance", "optimization"],
          600,
          0,
          null,
          {
            due_date: "2024-02-29T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-5-2",
          title: "Test Migration Review",
          date: "2024-02-15T13:00:00Z",
        },
      ],
      start_date: null,
      priority: "medium",
      assigned_to: "user-18",
      tags: ["testing", "implementation"],
    },
    {
      id: "milestone-5-4",
      project_id: "project-5",
      title: "Production Migration",
      description: "Execute final data migration to production environment",
      status: "draft",
      due_date: "2024-03-31T00:00:00Z",
      created_at: "2025-11-15T14:45:00Z",
      updated_at: "2025-11-15T14:45:00Z",
      payment_cents: 30000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 5,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-5-12",
          "Pre-migration Backup",
          "project-5",
          "user-18",
          {
            id: "user-18",
            display_name: "Sophia Martinez",
            avatar_url: "/avatars/sophia.jpg",
            professional_title: "DevOps Engineer",
          },
          "draft",
          "critical",
          4000,
          "Create comprehensive backup of all production data",
          ["infrastructure", "backup"],
          480,
          0,
          null,
          {
            due_date: "2024-03-10T00:00:00Z",
            start_date: null,
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-13",
          "Production Migration Execution",
          "project-5",
          "user-17",
          {
            id: "user-17",
            display_name: "Ryan Patel",
            avatar_url: "/avatars/ryan.jpg",
            professional_title: "Data Engineer",
          },
          "draft",
          "critical",
          10000,
          "Execute full data migration to production environment",
          ["implementation", "migration"],
          1200,
          0,
          null,
          {
            due_date: "2024-03-15T00:00:00Z",
            start_date: null,
            estimated_hours: 20,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-14",
          "Post-migration Validation",
          "project-5",
          "user-16",
          {
            id: "user-16",
            display_name: "Lisa Thompson",
            avatar_url: "/avatars/lisa.jpg",
            professional_title: "Data Analyst",
          },
          "draft",
          "critical",
          8000,
          "Validate all migrated data in production environment",
          ["validation", "production"],
          960,
          0,
          null,
          {
            due_date: "2024-03-20T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-15",
          "Issue Resolution",
          "project-5",
          "user-17",
          {
            id: "user-17",
            display_name: "Ryan Patel",
            avatar_url: "/avatars/ryan.jpg",
            professional_title: "Data Engineer",
          },
          "draft",
          "high",
          6000,
          "Address any issues arising from production migration",
          ["implementation", "troubleshooting"],
          720,
          0,
          null,
          {
            due_date: "2024-03-25T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-5-16",
          "Final Documentation",
          "project-5",
          "user-16",
          {
            id: "user-16",
            display_name: "Lisa Thompson",
            avatar_url: "/avatars/lisa.jpg",
            professional_title: "Data Analyst",
          },
          "draft",
          "medium",
          3000,
          "Create final documentation of migration process and outcomes",
          ["documentation"],
          360,
          0,
          null,
          {
            due_date: "2024-03-31T00:00:00Z",
            start_date: null,
            estimated_hours: 6,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-5-3",
          title: "Go-Live Planning Meeting",
          date: "2024-03-15T10:00:00Z",
        },
        {
          id: "event-5-4",
          title: "Post-Migration Review",
          date: "2024-04-05T14:00:00Z",
        },
      ],
      start_date: null,
      priority: "critical",
      assigned_to: "user-19",
      tags: ["implementation", "production"],
    },
  ],
  "project-6": [
    {
      id: "milestone-6-1",
      project_id: "project-6",
      title: "Initial Requirements Gathering",
      description: "Collect and document system requirements from stakeholders",
      status: "completed",
      due_date: "2025-10-31T00:00:00Z",
      created_at: "2025-10-01T08:00:00Z",
      updated_at: "2025-11-01T10:00:00Z",
      payment_cents: 12000,
      payment_status: "paid",
      is_current: false,
      tasks_count: 4,
      tasks_completed: 4,
      tasks: [
        createTaskWithDetails(
          "task-6-1",
          "Stakeholder Interviews",
          "project-6",
          "user-20",
          {
            id: "user-20",
            display_name: "Andrew Kim",
            avatar_url: "/avatars/andrew.jpg",
            professional_title: "Business Analyst",
          },
          "completed",
          "high",
          6000,
          "Conduct interviews with key stakeholders to gather requirements",
          ["planning", "interviews"],
          720,
          750,
          null,
          {
            due_date: "2025-10-10T00:00:00Z",
            start_date: "2025-10-01T00:00:00Z",
            estimated_hours: 12,
            actual_hours: 12.5,
            completed_at: "2025-10-09T17:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-6-2",
          "Process Documentation",
          "project-6",
          "user-20",
          {
            id: "user-20",
            display_name: "Andrew Kim",
            avatar_url: "/avatars/andrew.jpg",
            professional_title: "Business Analyst",
          },
          "completed",
          "high",
          5000,
          "Document current business processes and workflows",
          ["planning", "documentation"],
          600,
          630,
          null,
          {
            due_date: "2025-10-15T00:00:00Z",
            start_date: "2025-10-10T00:00:00Z",
            estimated_hours: 10,
            actual_hours: 10.5,
            completed_at: "2025-10-14T16:45:00Z",
          },
        ),
        createTaskWithDetails(
          "task-6-3",
          "Requirements Specification",
          "project-6",
          "user-20",
          {
            id: "user-20",
            display_name: "Andrew Kim",
            avatar_url: "/avatars/andrew.jpg",
            professional_title: "Business Analyst",
          },
          "completed",
          "high",
          7000,
          "Create detailed requirements specifications document",
          ["planning", "requirements"],
          840,
          900,
          null,
          {
            due_date: "2025-10-25T00:00:00Z",
            start_date: "2025-10-15T00:00:00Z",
            estimated_hours: 14,
            actual_hours: 15,
            completed_at: "2025-10-24T18:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-6-4",
          "Requirement Prioritization",
          "project-6",
          "user-20",
          {
            id: "user-20",
            display_name: "Andrew Kim",
            avatar_url: "/avatars/andrew.jpg",
            professional_title: "Business Analyst",
          },
          "completed",
          "medium",
          3000,
          "Categorize and prioritize requirements with stakeholders",
          ["planning", "prioritization"],
          360,
          330,
          null,
          {
            due_date: "2025-10-31T00:00:00Z",
            start_date: "2025-10-25T00:00:00Z",
            estimated_hours: 6,
            actual_hours: 5.5,
            completed_at: "2025-10-30T15:30:00Z",
          },
        ),
      ],
      events: [
        {
          id: "event-6-1",
          title: "Requirements Sign-off Meeting",
          date: "2025-10-30T15:00:00Z",
        },
      ],
      start_date: "2025-10-01T08:00:00Z",
      priority: "high",
      assigned_to: "user-20",
      tags: ["planning", "requirements"],
    },
    {
      id: "milestone-6-2",
      project_id: "project-6",
      title: "System Architecture Design",
      description: "Design technical architecture based on requirements",
      status: "active",
      due_date: "2025-12-15T00:00:00Z",
      created_at: "2025-11-01T08:15:00Z",
      updated_at: "2025-11-01T08:15:00Z",
      payment_cents: 18000,
      payment_status: "pending",
      is_current: true,
      tasks_count: 5,
      tasks_completed: 2,
      tasks: [
        createTaskWithDetails(
          "task-6-5",
          "Technology Stack Selection",
          "project-6",
          "user-21",
          {
            id: "user-21",
            display_name: "Jennifer Lee",
            avatar_url: "/avatars/jennifer.jpg",
            professional_title: "Solutions Architect",
          },
          "completed",
          "high",
          5000,
          "Evaluate and select appropriate technology stack components",
          ["architecture", "planning"],
          600,
          540,
          null,
          {
            due_date: "2025-11-10T00:00:00Z",
            start_date: "2025-11-01T00:00:00Z",
            estimated_hours: 10,
            actual_hours: 9,
            completed_at: "2025-11-09T16:30:00Z",
          },
        ),
        createTaskWithDetails(
          "task-6-6",
          "System Component Diagram",
          "project-6",
          "user-21",
          {
            id: "user-21",
            display_name: "Jennifer Lee",
            avatar_url: "/avatars/jennifer.jpg",
            professional_title: "Solutions Architect",
          },
          "completed",
          "high",
          6000,
          "Create system component diagram with interfaces and dependencies",
          ["architecture", "design"],
          720,
          690,
          null,
          {
            due_date: "2025-11-20T00:00:00Z",
            start_date: "2025-11-10T00:00:00Z",
            estimated_hours: 12,
            actual_hours: 11.5,
            completed_at: "2025-11-19T17:45:00Z",
          },
        ),
        createTaskWithDetails(
          "task-6-7",
          "Data Model Design",
          "project-6",
          "user-21",
          {
            id: "user-21",
            display_name: "Jennifer Lee",
            avatar_url: "/avatars/jennifer.jpg",
            professional_title: "Solutions Architect",
          },
          "in_progress",
          "high",
          8000,
          "Design comprehensive data model with entities and relationships",
          ["architecture", "data"],
          960,
          480,
          1701086400000,
          {
            due_date: "2025-12-01T00:00:00Z",
            start_date: "2025-11-20T00:00:00Z",
            estimated_hours: 16,
            actual_hours: 8,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-8",
          "Security Architecture",
          "project-6",
          "user-21",
          {
            id: "user-21",
            display_name: "Jennifer Lee",
            avatar_url: "/avatars/jennifer.jpg",
            professional_title: "Solutions Architect",
          },
          "in_progress",
          "high",
          7000,
          "Design security architecture with authentication and authorization",
          ["architecture", "security"],
          840,
          240,
          1701172800000,
          {
            due_date: "2025-12-10T00:00:00Z",
            start_date: "2025-11-28T00:00:00Z",
            estimated_hours: 14,
            actual_hours: 4,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-9",
          "Scalability Planning",
          "project-6",
          "user-21",
          {
            id: "user-21",
            display_name: "Jennifer Lee",
            avatar_url: "/avatars/jennifer.jpg",
            professional_title: "Solutions Architect",
          },
          "todo",
          "medium",
          4000,
          "Design for system scalability and performance requirements",
          ["architecture", "scalability"],
          480,
          0,
          null,
          {
            due_date: "2025-12-15T00:00:00Z",
            start_date: "2025-12-10T00:00:00Z",
            estimated_hours: 8,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-6-2",
          title: "Architecture Review",
          date: "2025-12-05T10:00:00Z",
        },
      ],
      start_date: "2025-11-01T08:15:00Z",
      priority: "high",
      assigned_to: "user-21",
      tags: ["architecture", "design"],
    },
    {
      id: "milestone-6-3",
      project_id: "project-6",
      title: "Core System Development",
      description: "Implement foundational system components",
      status: "draft",
      due_date: "2024-02-28T00:00:00Z",
      created_at: "2025-11-01T08:30:00Z",
      updated_at: "2025-11-01T08:30:00Z",
      payment_cents: 35000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 6,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-6-10",
          "Database Implementation",
          "project-6",
          "user-22",
          {
            id: "user-22",
            display_name: "Michael Rodriguez",
            avatar_url: "/avatars/michael.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          10000,
          "Implement database schema and initial data structures",
          ["development", "database"],
          1200,
          0,
          null,
          {
            due_date: "2024-01-15T00:00:00Z",
            start_date: null,
            estimated_hours: 20,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-11",
          "Core API Development",
          "project-6",
          "user-22",
          {
            id: "user-22",
            display_name: "Michael Rodriguez",
            avatar_url: "/avatars/michael.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          12000,
          "Develop core API infrastructure and base endpoints",
          ["development", "api"],
          1440,
          0,
          null,
          {
            due_date: "2024-01-31T00:00:00Z",
            start_date: null,
            estimated_hours: 24,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-12",
          "Authentication System",
          "project-6",
          "user-22",
          {
            id: "user-22",
            display_name: "Michael Rodriguez",
            avatar_url: "/avatars/michael.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "high",
          8000,
          "Implement authentication and authorization system",
          ["development", "auth", "security"],
          960,
          0,
          null,
          {
            due_date: "2024-02-10T00:00:00Z",
            start_date: null,
            estimated_hours: 16,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-13",
          "Logging and Monitoring",
          "project-6",
          "user-22",
          {
            id: "user-22",
            display_name: "Michael Rodriguez",
            avatar_url: "/avatars/michael.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          6000,
          "Implement logging, monitoring, and alerting systems",
          ["development", "operations"],
          720,
          0,
          null,
          {
            due_date: "2024-02-15T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-14",
          "Error Handling Framework",
          "project-6",
          "user-22",
          {
            id: "user-22",
            display_name: "Michael Rodriguez",
            avatar_url: "/avatars/michael.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          5000,
          "Develop comprehensive error handling and reporting",
          ["development", "error-handling"],
          600,
          0,
          null,
          {
            due_date: "2024-02-20T00:00:00Z",
            start_date: null,
            estimated_hours: 10,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-15",
          "Initial Unit Tests",
          "project-6",
          "user-22",
          {
            id: "user-22",
            display_name: "Michael Rodriguez",
            avatar_url: "/avatars/michael.jpg",
            professional_title: "Backend Developer",
          },
          "draft",
          "medium",
          7000,
          "Create initial unit test suite for core components",
          ["development", "testing"],
          840,
          0,
          null,
          {
            due_date: "2024-02-28T00:00:00Z",
            start_date: null,
            estimated_hours: 14,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-6-3",
          title: "Development Sprint Planning",
          date: "2024-01-05T09:00:00Z",
        },
        {
          id: "event-6-4",
          title: "Mid-phase Review",
          date: "2024-02-01T14:00:00Z",
        },
      ],
      start_date: null,
      priority: "high",
      assigned_to: "user-22",
      tags: ["development", "backend"],
    },
    {
      id: "milestone-6-4",
      project_id: "project-6",
      title: "Module Development",
      description: "Implement specific functional modules",
      status: "draft",
      due_date: "2024-04-30T00:00:00Z",
      created_at: "2025-11-01T08:45:00Z",
      updated_at: "2025-11-01T08:45:00Z",
      payment_cents: 40000,
      payment_status: "pending",
      is_current: false,
      tasks_count: 5,
      tasks_completed: 0,
      tasks: [
        createTaskWithDetails(
          "task-6-16",
          "User Management Module",
          "project-6",
          "user-23",
          {
            id: "user-23",
            display_name: "Rachel Green",
            avatar_url: "/avatars/rachel.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "high",
          9000,
          "Implement user management module with CRUD operations",
          ["development", "frontend", "users"],
          1080,
          0,
          null,
          {
            due_date: "2024-03-15T00:00:00Z",
            start_date: null,
            estimated_hours: 18,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-17",
          "Reporting System",
          "project-6",
          "user-23",
          {
            id: "user-23",
            display_name: "Rachel Green",
            avatar_url: "/avatars/rachel.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "medium",
          10000,
          "Develop reporting system with data visualization",
          ["development", "frontend", "reporting"],
          1200,
          0,
          null,
          {
            due_date: "2024-04-01T00:00:00Z",
            start_date: null,
            estimated_hours: 20,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-18",
          "Workflow Engine",
          "project-6",
          "user-23",
          {
            id: "user-23",
            display_name: "Rachel Green",
            avatar_url: "/avatars/rachel.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "high",
          12000,
          "Implement workflow engine for business process automation",
          ["development", "workflow"],
          1440,
          0,
          null,
          {
            due_date: "2024-04-15T00:00:00Z",
            start_date: null,
            estimated_hours: 24,
            actual_hours: 0,
            completed_at: null,
          },
        ),
        createTaskWithDetails(
          "task-6-19",
          "Notification System",
          "project-6",
          "user-23",
          {
            id: "user-23",
            display_name: "Rachel Green",
            avatar_url: "/avatars/rachel.jpg",
            professional_title: "Frontend Developer",
          },
          "draft",
          "medium",
          6000,
          "Implement notification system with email and in-app alerts",
          ["development", "notifications"],
          720,
          0,
          null,
          {
            due_date: "2024-04-30T00:00:00Z",
            start_date: null,
            estimated_hours: 12,
            actual_hours: 0,
            completed_at: null,
          },
        ),
      ],
      events: [
        {
          id: "event-6-5",
          title: "Module Design Review",
          date: "2024-03-15T10:00:00Z",
        },
      ],
      start_date: null,
      priority: "medium",
      assigned_to: "user-23",
      tags: ["development", "modules"],
    },
  ],
};

// Contracts for each project
const mockContracts = {
  "project-1": {
    id: "contract-1",
    project_id: "project-1",
    title: "Mobile App Development Contract",
    description: "Contract for development of cross-platform mobile app",
    status: "active",
    start_date: "2025-08-15T00:00:00Z",
    end_date: "2025-11-15T00:00:00Z",
    created_at: "2025-08-14T15:00:00Z",
    updated_at: "2025-08-14T15:00:00Z",
    client_name: "MobileApp Inc",
    client_company: "Mobile Solutions LLC",
    currency: "USD",
    total_amount_cents: 12000,
    upwork_contract_id: "upwork-123456",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-2",
        display_name: "Bob Johnson",
        email: "bob@example.com",
        avatar_url: "/avatars/bob.jpg",
        role: "developer",
        hasApproved: true,
      },
    ],
    payments: [
      {
        id: "payment-1-1",
        contract_id: "contract-1",
        amount_cents: 5000,
        status: "paid",
        created_at: "2025-08-14T15:30:00Z",
        milestone_id: "milestone-1-1",
        payment_date: "2025-09-14T00:00:00Z",
      },
      {
        id: "payment-1-2",
        contract_id: "contract-1",
        amount_cents: 7000,
        status: "pending",
        created_at: "2025-08-14T15:30:00Z",
        milestone_id: "milestone-1-2",
        payment_date: null,
      },
    ],
  },
  "project-2": {
    id: "contract-2",
    project_id: "project-2",
    title: "Website Redesign Contract",
    description: "Contract for company website redesign",
    status: "active",
    start_date: "2025-09-01T00:00:00Z",
    end_date: "2025-10-31T00:00:00Z",
    created_at: "2025-08-25T14:00:00Z",
    updated_at: "2025-08-25T14:00:00Z",
    client_name: "WebDesign Co",
    client_company: "Web Solutions Inc",
    currency: "USD",
    total_amount_cents: 7000,
    upwork_contract_id: "upwork-234567",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-4",
        display_name: "Tom Wilson",
        email: "tom@example.com",
        avatar_url: "/avatars/tom.jpg",
        role: "developer",
        hasApproved: true,
      },
    ],
    payments: [
      {
        id: "payment-2-1",
        contract_id: "contract-2",
        amount_cents: 3000,
        status: "paid",
        created_at: "2025-08-25T14:30:00Z",
        milestone_id: "milestone-2-1",
        payment_date: "2025-09-28T00:00:00Z",
      },
      {
        id: "payment-2-2",
        contract_id: "contract-2",
        amount_cents: 4000,
        status: "pending",
        created_at: "2025-08-25T14:30:00Z",
        milestone_id: "milestone-2-2",
        payment_date: null,
      },
    ],
  },
  "project-3": {
    id: "contract-3",
    project_id: "project-3",
    title: "E-commerce Platform Contract",
    description: "Contract for e-commerce website development",
    status: "active",
    start_date: "2025-10-10T00:00:00Z",
    end_date: "2025-12-31T00:00:00Z",
    created_at: "2025-10-05T13:00:00Z",
    updated_at: "2025-10-05T13:00:00Z",
    client_name: "ShopSmart",
    client_company: "Retail Solutions Group",
    currency: "USD",
    total_amount_cents: 14000,
    upwork_contract_id: "upwork-345678",
    members: [
      {
        id: "user-1",
        display_name: "Jane Smith",
        email: "jane@example.com",
        avatar_url: "/avatars/jane.jpg",
        role: "client",
        hasApproved: true,
      },
      {
        id: "user-6",
        display_name: "Mike Davis",
        email: "mike@example.com",
        avatar_url: "/avatars/mike.jpg",
        role: "developer",
        hasApproved: true,
      },
    ],
    payments: [
      {
        id: "payment-3-1",
        contract_id: "contract-3",
        amount_cents: 6000,
        status: "pending",
        created_at: "2025-10-05T13:30:00Z",
        milestone_id: "milestone-3-1",
        payment_date: null,
      },
      {
        id: "payment-3-2",
        contract_id: "contract-3",
        amount_cents: 8000,
        status: "pending",
        created_at: "2025-10-05T13:30:00Z",
        milestone_id: "milestone-3-2",
        payment_date: null,
      },
    ],
  },
};

// Project invitations
const mockProjectInvitations = {
  "project-1": [
    {
      invitation: {
        id: "inv-1-1",
        project_id: "project-1",
        email: "david@example.com",
        role: "developer",
        invited_by: "user-1",
        created_at: "2025-08-16T14:00:00Z",
        expires_at: "2025-08-23T14:00:00Z",
        status: "pending",
      },
      project: {
        id: "project-1",
        name: "Mobile App Development",
        slug: "mobile-app",
      },
      sender_profile: {
        id: "user-1",
        display_name: "Jane Smith",
        avatar_url: "/avatars/jane.jpg",
        professional_title: "Project Manager",
      },
    },
  ],
  "project-2": [
    {
      invitation: {
        id: "inv-2-1",
        project_id: "project-2",
        email: "rachel@example.com",
        role: "designer",
        invited_by: "user-1",
        created_at: "2025-09-03T14:30:00Z",
        expires_at: "2025-09-10T14:30:00Z",
        status: "pending",
      },
      project: {
        id: "project-2",
        name: "Website Redesign",
        slug: "website-redesign",
      },
      sender_profile: {
        id: "user-1",
        display_name: "Jane Smith",
        avatar_url: "/avatars/jane.jpg",
        professional_title: "Project Manager",
      },
    },
  ],
  "project-3": [
    {
      invitation: {
        id: "inv-3-1",
        project_id: "project-3",
        email: "jessica@example.com",
        role: "developer",
        invited_by: "user-1",
        created_at: "2025-10-12T15:00:00Z",
        expires_at: "2025-10-19T15:00:00Z",
        status: "pending",
      },
      project: {
        id: "project-3",
        name: "E-commerce Platform",
        slug: "ecommerce-platform",
      },
      sender_profile: {
        id: "user-1",
        display_name: "Jane Smith",
        avatar_url: "/avatars/jane.jpg",
        professional_title: "Project Manager",
      },
    },
  ],
};

// Subscriptions for each project
const mockSubscriptions = {
  "project-1": {
    id: "sub-1",
    project_id: "project-1",
    tier: "pro",
    status: "active",
    start_date: "2025-08-15T00:00:00Z",
    end_date: "2024-08-15T00:00:00Z",
    created_at: "2025-08-15T12:00:00Z",
    updated_at: "2025-08-15T12:00:00Z",
    amount_cents: 2000,
    payment_intent_id: "pi_123456",
    metadata: null,
    user_id: "user-1",
  },
  "project-2": {
    id: "sub-2",
    project_id: "project-2",
    tier: "business",
    status: "active",
    start_date: "2025-09-01T00:00:00Z",
    end_date: "2024-09-01T00:00:00Z",
    created_at: "2025-09-01T10:30:00Z",
    updated_at: "2025-09-01T10:30:00Z",
    amount_cents: 5000,
    payment_intent_id: "pi_234567",
    metadata: null,
    user_id: "user-1",
  },
  "project-3": {
    id: "sub-3",
    project_id: "project-3",
    tier: "pro",
    status: "active",
    start_date: "2025-10-10T00:00:00Z",
    end_date: "2024-10-10T00:00:00Z",
    created_at: "2025-10-10T09:15:00Z",
    updated_at: "2025-10-10T09:15:00Z",
    amount_cents: 2000,
    payment_intent_id: "pi_345678",
    metadata: null,
    user_id: "user-1",
  },
};

// Mock user and profile
const mockUser = {
  id: "user-1",
  email: "jane@example.com",
  created_at: "2025-01-01T00:00:00Z",
};

const mockProfile = {
  id: "user-1",
  user_id: "user-1",
  display_name: "Jane Smith",
  avatar_url: "/avatars/jane.jpg",
  professional_title: "Project Manager",
  created_at: "2025-01-01T00:00:00Z",
  updated_at: "2025-01-01T00:00:00Z",
  current_project_id: "project-1",
  email: "jane@example.com",
  // Adding missing fields
  bio: "Experienced project manager with expertise in mobile app development and web design.",
  github_username: "janesmith",
  notification_preferences: {
    email: true,
    inApp: true,
    desktop: true,
  },
  timezone: "America/New_York",
  ui_preferences: {
    theme: "light",
    compactView: false,
  },
  website: "https://janesmith.com",
};

// User invitations
const mockUserInvitations: Partial<ProjectInvitationWithProfile>[] = [];

// Create the initial app state with default project (project-1)
export const mockInitialAppState = {
  // Core user data
  user: mockUser as Partial<User>,
  profile: mockProfile as Partial<Profile>,

  // Projects data
  projects: mockProjects as Partial<Project>[],
  project: {
    ...mockProjects[0],
    project_members: mockProjectMembers[
      "project-1"
    ] as Partial<ProjectMemberWithProfile>[],
    project_invitations: mockProjectInvitations[
      "project-1"
    ] as Partial<ProjectInvitationWithDetails>[],
  } as Partial<ProjectWithDetails>,

  // Tasks data
  tasks: (mockMilestones["project-1"] as unknown as Partial<MilestoneWithTasks>)
    .tasks,
  task: null,
  userInvitations:
    mockUserInvitations as Partial<ProjectInvitationWithDetails>[],
  projectInvitations: mockProjectInvitations[
    "project-1"
  ] as Partial<ProjectInvitationWithDetails>[],

  // Milestone data
  milestone: mockMilestones[
    "project-1"
  ][0] as unknown as Partial<MilestoneWithTasks>,
  milestones: mockMilestones[
    "project-1"
  ] as unknown[] as Partial<MilestoneWithTasks>[],

  // Contract data
  contract: mockContracts["project-1"] as Partial<ContractWithMembers>,

  // Subscription data
  subscription: mockSubscriptions["project-1"] as Partial<ProjectSubscription>,

  // Role data
  appRole: "user",
  isAdmin: true,
  projectMemberRole: "pm",
};

// Helper function to transform milestones and tasks according to rules
function transformMilestones(
  milestones: Partial<MilestoneWithTasks>[],
): Partial<MilestoneWithTasks>[] {
  if (!milestones || milestones.length === 0) return [];

  // Ensure only one active milestone per project
  let hasActiveFound = false;

  // Apply transformations to each milestone
  const transformedMilestones = milestones.map((milestone, milestoneIndex) => {
    const isFirst = milestoneIndex === 0;

    // Determine milestone status
    let status = milestone.status;

    if (status === "active" && hasActiveFound) {
      // If we already have an active milestone, convert this to draft
      status = "draft";
    } else if (status === "active") {
      hasActiveFound = true;
    }

    // If there's no active milestone yet and this is the first one, make it active
    if (!hasActiveFound && isFirst) {
      status = "active";
      hasActiveFound = true;
    }

    // Transform tasks based on milestone status
    let tasks = milestone.tasks || [];

    // Reset tasks array if it's empty
    if (tasks.length === 0) {
      tasks = [];
    } else {
      // Transform tasks based on milestone status
      tasks = tasks.map((task, taskIndex) => {
        // IMPORTANT: Assign ordinal_id and ordinal_priority starting from 1
        const ordinal_id = taskIndex + 1;
        const ordinal_priority = taskIndex + 1; // Changed to start from 1 instead of 0

        // Use proper type casting for status
        let taskStatus = task.status as Tables<"tasks">["status"];

        // Rule 1: All tasks in completed milestones should be completed
        if (status === "completed") {
          taskStatus = "completed";

          // Set actual work times to match or be close to estimates
          const estimatedMinutes = task.estimated_minutes || 0;
          const recordedMinutes = Math.round(
            estimatedMinutes * (0.9 + Math.random() * 0.2),
          );

          // Update schedule if it exists
          const schedule = task.schedule
            ? {
                ...task.schedule,
                actual_hours: task.schedule.estimated_hours,
                completed_at: task.schedule.due_date,
              }
            : null;

          return {
            ...task,
            status: taskStatus,
            ordinal_id,
            ordinal_priority,
            recorded_minutes: recordedMinutes,
            schedule,
          };
        }

        // Rule 2: Draft tasks should only be on draft milestones
        if (taskStatus === "draft" && status !== "draft") {
          // Convert draft tasks to todo if milestone is active
          taskStatus = status === "active" ? "todo" : "completed";
        }

        // For active milestones, ensure we have some in-progress and todo tasks
        if (status === "active") {
          // For active milestones, distribute tasks among todo, in_progress, and in_review
          // Target having 3-7 active tasks total
          const taskCount = tasks.length;
          const targetActiveTasks = Math.min(
            7,
            Math.max(3, Math.floor(taskCount * 0.7)),
          );

          if (taskIndex < targetActiveTasks) {
            // Distribute the active tasks between statuses
            if (taskIndex % 3 === 0) {
              taskStatus = "in_progress";
            } else if (taskIndex % 3 === 1) {
              taskStatus = "todo";
            } else {
              taskStatus = "in_review";
            }
          } else {
            // Remaining tasks will be either completed or draft
            taskStatus = taskIndex % 2 === 0 ? "completed" : "draft";
          }
        }

        return {
          ...task,
          status: taskStatus,
          ordinal_id,
          ordinal_priority,
        };
      });
    }

    // Update the milestone with transformed values
    return {
      ...milestone,
      status,
      tasks,
      is_current: status === "active",
      tasks_count: tasks.length,
      tasks_completed: tasks.filter(t => t.status === "completed").length,
    };
  });

  return transformedMilestones;
}

// Create task with details function with updated ordinal_priority
function createTaskWithDetails(
  id: string,
  title: string,
  projectId: string,
  assigneeId: string | null,
  assigneeProfile: Profile | null,
  status: string,
  priority: string,
  budget?: number | null,
  description?: string,
  tags?: string[],
  estimatedMinutes?: number | null,
  recordedMinutes?: number | null,
  startTime?: number | null,
  schedule?: {
    due_date: string | null;
    start_date: string | null;
    estimated_hours: number | null;
    actual_hours: number | null;
    completed_at: string | null;
  },
): TaskWithAssignee {
  const createdAt = new Date();
  createdAt.setMonth(createdAt.getMonth() - 1);

  // Extract the task number from the ID for use as ordinal_id
  const taskIdParts = id.split("-");
  const taskNumber = parseInt(taskIdParts[taskIdParts.length - 1]);

  return {
    id,
    title,
    project_id: projectId,
    assignee: assigneeId,
    assignee_profile: assigneeProfile,
    status: status as Tables<"tasks">["status"],
    priority: priority as Tables<"tasks">["priority"],
    budget_cents: budget ?? 0,
    description: description ?? `Task description for ${title}`,
    created_at: createdAt.toISOString(),
    updated_at: new Date().toISOString(),
    estimated_minutes: estimatedMinutes ?? 0,
    recorded_minutes: recordedMinutes ?? 0,
    start_time: startTime,
    prefix: projectId.substring(0, 4),
    ordinal_id: taskNumber, // This should use the relative position within the milestone
    ordinal_priority: taskNumber, // This should use the relative position within the milestone
    slug: title.toLowerCase().replace(/\s+/g, "-"),
    tags,
    schedule,
  };
}

// Updated getMockDataForProject function

export const getMockDataForProject = (
  projectId: string,
  milestoneId?: string,
): {
  tasks: Partial<TaskWithAssignee>[];
  project: Partial<ProjectWithDetails> | null;
  milestone: Partial<MilestoneWithTasks> | null;
  milestones: Partial<MilestoneWithTasks>[];
  contract: Partial<ContractWithMembers> | null;
  subscription: Partial<ProjectSubscription> | null;
  projectInvitations: Partial<ProjectInvitationWithDetails>[];
} => {
  const project = mockProjects.find(p => p.id === projectId);

  if (!project) {
    return {
      tasks: [],
      project: null,
      milestone: null,
      milestones: [],
      contract: null,
      subscription: null,
      projectInvitations: [],
    };
  }

  // Get project members for the specific project
  const projectMembers =
    mockProjectMembers[projectId as keyof typeof mockProjectMembers] || [];

  // Get all milestones for the project
  let projectMilestones = (mockMilestones[
    projectId as keyof typeof mockMilestones
  ] || []) as unknown as Partial<MilestoneWithTasks>[];

  // Transform milestones to enforce the rules
  projectMilestones = transformMilestones(projectMilestones);

  // Find the specified milestone, active milestone, or default to first milestone
  let currentMilestone: Partial<MilestoneWithTasks> | null = null;

  if (milestoneId) {
    // If a milestone ID was specified, find that milestone
    currentMilestone =
      projectMilestones.find(m => m.id === milestoneId) || null;
  } else {
    // Otherwise, find the active milestone first
    currentMilestone =
      projectMilestones.find(m => m.status === "active") || null;

    // If no active milestone found, default to the first milestone
    if (!currentMilestone && projectMilestones.length > 0) {
      currentMilestone = projectMilestones[0];
    }
  }

  // Get the milestone-specific contract if available, otherwise use the project contract
  let contract: Partial<ContractWithMembers> | null = null;

  if (
    currentMilestone &&
    milestoneContracts[currentMilestone.id as keyof typeof milestoneContracts]
  ) {
    // Use the milestone-specific contract
    const milestoneContract =
      milestoneContracts[
        currentMilestone.id as keyof typeof milestoneContracts
      ];
    contract = {
      ...milestoneContract,
      status: milestoneContract.status as
        | "active"
        | "completed"
        | "cancelled"
        | undefined,
    };
  } else {
    // Fallback to project contract
    const projectContract =
      mockContracts[projectId as keyof typeof mockContracts];
    if (projectContract) {
      contract = {
        ...projectContract,
        status: projectContract.status as
          | "active"
          | "completed"
          | "cancelled"
          | undefined,
      };
    } else {
      contract = null;
    }
  }

  // Get tasks for the current milestone
  let tasks = currentMilestone?.tasks || [];

  // Ensure all tasks in the collection have sequential ordinal_priority values starting from 1
  tasks = tasks.map((task, index) => ({
    ...task,
    ordinal_id: index + 1,
    ordinal_priority: index + 1,
  }));

  return {
    tasks,
    project: {
      ...project,
      project_members: projectMembers as Partial<ProjectMemberWithProfile>[],
      project_invitations: (mockProjectInvitations[
        projectId as keyof typeof mockProjectInvitations
      ] || []) as Partial<ProjectInvitationWithDetails>[],
    } as Partial<ProjectWithDetails>,
    milestone: currentMilestone
      ? {
          ...currentMilestone,
          tasks,
        }
      : null,
    milestones: projectMilestones,
    contract,
    subscription: (mockSubscriptions[
      projectId as keyof typeof mockSubscriptions
    ] || null) as Partial<ProjectSubscription> | null,
    projectInvitations: (mockProjectInvitations[
      projectId as keyof typeof mockProjectInvitations
    ] || []) as Partial<ProjectInvitationWithDetails>[],
  };
};
